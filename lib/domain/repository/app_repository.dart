import 'package:chat_gpt_sdk/chat_gpt_sdk.dart';import 'package:chatgpt/utils/const.dart';import 'package:dash_chat_2/dash_chat_2.dart';class AppRepository {  final OpenAI _openAI;  AppRepository()      : _openAI = OpenAI.instance.build(            token: OPENAI_API_KEY,            baseOption: HttpSetup(receiveTimeout: const Duration(seconds: 5)),            enableLog: true);  Future<List<ChatMessage>> getChatResponse(List<ChatMessage> messages) async {    List<Messages> messagesHistory = messages.reversed.map((m) {      if (m.user.id == '1') {        return Messages(role: Role.user, content: m.text);      } else {        return Messages(role: Role.assistant, content: m.text);      }    }).toList();    final request = ChatCompleteText(        model: GptTurbo0301ChatModel(),        messages: messagesHistory,        maxToken: 200);    final response = await _openAI.onChatCompletion(request: request);    return response!.choices        .map((choice) => ChatMessage(            user: ChatUser(id: '2'),            createdAt: DateTime.now(),            text: choice.message!.content))        .toList();  }}